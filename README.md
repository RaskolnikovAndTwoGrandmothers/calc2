# üìö –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Calc2

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ß—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

   
   git clone https://github.com/RaskolnikovAndTwoGrandmothers/calc2.git
   

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∞–≥–µ–Ω—Ç–∞:

   
   export TIME_ADDITION_MS=100
   export TIME_SUBTRACTION_MS=100
   export TIME_MULTIPLICATIONS_MS=100
   export TIME_DIVISIONS_MS=100
   export COMPUTING_POWER=4 # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω –¥–ª—è –∞–≥–µ–Ω—Ç–∞
   

3. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   
   go mod tidy
   

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

   
   go run ./cmd/calc_service/...
   

## üåê API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

–ó–∞–ø—Ä–æ—Å:

curl --location 'localhost/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": "2+2*2"
}'


–û—Ç–≤–µ—Ç:

{
    "id": "<—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏—è>"
}


–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–∞:

- 201 - –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- 422 - –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- 500 - —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### üìã –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–π

–ó–∞–ø—Ä–æ—Å:

curl --location 'localhost/api/v1/expressions'


–û—Ç–≤–µ—Ç:

{
    "expressions": [
        {
            "id": "<–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏—è>",
            "status": "<—Å—Ç–∞—Ç—É—Å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è>",
            "result": "<—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è>"
        }
    ]
}


–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–∞:

- 200 - —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- 500 - —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### üîç –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É

–ó–∞–ø—Ä–æ—Å:

curl --location 'localhost/api/v1/expressions/:id'


–û—Ç–≤–µ—Ç:

{
    "expression": {
        "id": "<–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏—è>",
        "status": "<—Å—Ç–∞—Ç—É—Å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è>",
        "result": "<—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è>"
    }
}


–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–∞:

- 200 - —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
- 404 - –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- 500 - —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### üîÑ –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ó–∞–ø—Ä–æ—Å:

curl --location 'localhost/internal/task'


–û—Ç–≤–µ—Ç:

{
    "task": {
        "id": "<–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏>",
        "arg1": "<–∏–º—è –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞>",
        "arg2": "<–∏–º—è –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞>",
        "operation": "<–æ–ø–µ—Ä–∞—Ü–∏—è>",
        "operation_time": "<–≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏>"
    }
}


–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–∞:

- 200 - —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞ –∑–∞–¥–∞—á–∞
- 404 - –Ω–µ—Ç –∑–∞–¥–∞—á–∏
- 500 - —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### ‚úîÔ∏è –ü—Ä–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–ó–∞–ø—Ä–æ—Å:

curl --location 'localhost/internal/task' \
--header 'Content-Type: application/json' \
--data '{
  "id": "<–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏>",
  "result": "<—Ä–µ–∑—É–ª—å—Ç–∞—Ç>"
}'


–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–∞:

- 200 - —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–∏—Å–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- 404 - –Ω–µ—Ç —Ç–∞–∫–æ–π –∑–∞–¥–∞—á–∏
- 422 - –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- 500 - —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –Ω—É–∂–Ω–æ–π —Ñ–æ—Ä–º–µ, –∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –ø—Ä–æ–µ–∫—Ç–∞. –£–¥–∞—á–∏ –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö! üòÉ
